<!DOCTYPE html>
<html>
<head>
    <title>Payment Checkout</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .card {
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.1);
            width: 360px;
            text-align: center;
        }
        .timer {
            font-size: 1.2rem;
            color: #d9534f;
            font-weight: bold;
            background: #fff5f5;
            padding: 8px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .qr-code {
            width: 220px;
            padding: 10px;
            border: 1px solid #eee;
            border-radius: 12px;
            margin: 15px 0;
        }
        .info h2 { margin: 5px 0; color: #1a1a1a; }
        .info p { color: #666; margin: 2px 0; }

        .btn-group {
            display: flex;
            gap: 12px;
            margin-top: 25px;
        }
        .btn-paid {
            flex: 1;
            background: #28a745;
            color: white;
            border: none;
            padding: 14px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            font-size: 1rem;
        }
        .btn-cancel {
            flex: 1;
            background: #6c757d;
            color: white;
            text-decoration: none;
            padding: 14px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .btn-paid:hover { background: #218838; }
        .btn-cancel:hover { background: #5a6268; }
    </style>
</head>
<body>

<div class="card">
    <div class="timer">
        ‚è≥ Expiring in: <span id="clock">05:00</span>
    </div>

    <div class="info">
        <h2>{{ movie.name }}</h2>
        <p>{{ theater.name }}</p>
        <p><strong>Seat: {{ seat.seat_number }}</strong></p>
    </div>

    <img src="/media/GooglePay_QR.png" class="qr-code" alt="Scan to Pay">
    <p style="font-size: 0.85rem; color: #999;">Scan the QR code to pay via UPI</p>

    <form method="POST">
    {% csrf_token %}
    <div class="btn-group">
        <button type="submit" name="action" value="paid" class="btn-paid">I Have Paid</button>

        <a href="{% url 'movie_list' %}" class="btn-cancel">Cancel</a>
    </div>
    </form>
</div>

<script>
    let timeLeft = 300; // 5 minutes
    const clockDisplay = document.getElementById('clock');

    const timerInterval = setInterval(() => {
        let mins = Math.floor(timeLeft / 60);
        let secs = timeLeft % 60;

        clockDisplay.innerText =
            (mins < 10 ? '0' : '') + mins + ":" +
            (secs < 10 ? '0' : '') + secs;

        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            alert("Time's up! Please select your seat again.");
            window.location.href = "{% url 'book_seats' movie.id %}";   //here we back page
        }
        timeLeft--;
    }, 1000); //<- 1000 iska logic nahi pata !
</script>

</body>
</html>